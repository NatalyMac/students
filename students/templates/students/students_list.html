{% extends "students/base.html" %} 
<!-- наследуем от базового шаблона -->
{% load static from staticfiles %}
<!-- загружаем тег для указания урла  для статичных ресурсов -->
{% block meta_title %} Студенты {% endblock meta_title %}

{% block title %} База Студентов {% endblock title %}
{% block logo %} <h2> <a href="#">Сервис учета студентов - Студенты</a></h2> {% endblock logo%}
<!--играемся - меняем лого из дочерних файлов-->

{% block content %}
     
<div class="add-student"><a class="btn btn-primary btn-md" href= {% url 'students_add' %}> Добавить студента</a>
</div> <!-- кнопке прописали адрес запроса r'^students/add/$',  и вьюшку students_add, заменили 
      явный адрес  "/students/add" на тег url с именем адреса из определения ф-и url  в файле urls-->
  
    
    <!-- таблица-->
  <table class="table table-hover table-striped">
  <thead>
    <tr>
    <th><a href="">№п/п</a></th>
    <th>Фото</th>
    <th><a href="">Фамилия&uarr;</a></th>
    <th><a href="#">Имя</a></th>
    <th><a href="#">№ билета</a></th>
    <th>Действия</th>
    </tr>
  </thead>
  <tbody>
    
    {% for student in students%}
    <!-- объявили переменную student, смотрим в список students, полученный из вьюшки (по сути из БД), пока список не закончился бегаем по списку и генерируем выходную таблицу-->
      <tr>
      <td> {{ forloop.counter }}</td>
      <td><img class="img-circle" width=30 height=30 src= {% static student.image %}></td>
      <!--  Источник изображения src = > тег static указывает на урл, где хранятся статические ресурсы проекта, посмотреть его значения можно в settings.py. В базе данных для каждого студентся хранится путь к файлу с фото - это student.img. Т.е. вместо статичного пути "img/keks.jpg" имеем выражение, которого вычислит нам путь изображения-->

      <td><a title="Редактировать" href= {% url 'students_edit' student.id %}>{{ student.last_name }}</a></td>
      <!--При щелчке на фамилию или имя открывается форма редактироваения конкретного текущего  студента. Адрес запроса на редактирование этого студента описан в регулярном выражении r'^students/(?P<sid>\d+)/edit/$'. Пример адреса - "/students/1/edit". Тег урл формирует нам этот адрес из имени урла 'students_edit'  и идентификатора студента. 
      Данный идентификатор передается в регулярное выражение и во вьшку как переменная sid-->
      
      <td><a title="Редактировать" href={% url "students_edit" student.id %}> {{ student.first_name }} </a></td>
      <td> {{ student.ticket }} </td>
      <td>
         <div class="dropdown">
           <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">Действие
           <span class="caret"></span></button>
             <ul class="dropdown-menu" role="menu">
                <li role="presentation"><a role="menuitem" tabindex="-1" href= {% url "journal_student" student.id %}>Посещение</a></li>
                <li role="presentation"><a role="menuitem" tabindex="-1" href= {% url "students_edit" student.id %}>Редактирование</a></li>
                <!-- путь /students/1/edit/ записан в виде {% url "students_edit" student.id %}  где "students_edit" это name из url файла urls, student.id - данные полученные из переменной student из списка students-->
                <li role="presentation"><a role="menuitem" tabindex="-1" href= {% url 'students_delete' student.id %}>Удаление</a></li>
              
             </ul>
          </div>
      </td>
      </tr>
    {% endfor %}
  </tbody>
  </table>


{% include 'students/pages.html' %}
<!-- включаем файл с пагинатором pages.html-->

 

{% endblock content %}
{% block footer %} Студенты {% endblock footer %}
<!--играемся - добавляем в футер название страницы-->
    
    